package uk.ac.ebi.atlas.search.EFO;

import com.google.common.collect.ImmutableList;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;

import javax.inject.Inject;

import static org.hamcrest.Matchers.hasSize;
import static org.hamcrest.collection.IsIterableContainingInOrder.contains;
import static org.junit.Assert.assertThat;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations = {"classpath:applicationContext.xml", "classpath:solrContextIT.xml", "classpath:oracleContext.xml"})
public class EFOTermExpansionClientIT {


    @Inject
    EFOTermExpansionClient subject;

    @Test
    public void cancer() throws Exception {
        ImmutableList<String> children = subject.fetchEFOChildren("cancer");

        //System.out.println("\"" + Joiner.on("\", \"").join(children) + "\"");

        assertThat(children, hasSize(399));
        assertThat(children, contains("EFO:0000216", "EFO:0000228", "EFO:0000231", "EFO:0003093", "EFO:0004193", "EFO:0000292", "EFO:0000305", "EFO:0001061", "EFO:0005221", "EFO:0004986", "EFO:0000466", "EFO:0002916", "EFO:0000178", "EFO:0000182", "EFO:0002938", "EFO:0000563", "EFO:0001071", "EFO:0000756", "EFO:0004906", "EFO:0000196", "EFO:0001075", "EFO:0002618", "EFO:0001663", "EFO:0002890", "EFO:0000698", "EFO:0000707", "EFO:0000205", "EFO:0000206", "EFO:0005088", "EFO:0002892", "EFO:0002919", "EFO:0002921", "EFO:0000272", "EFO:0003094", "EFO:0002939", "EFO:0000632", "EFO:0000565", "EFO:0000574", "EFO:0002427", "EFO:0002425", "EFO:0000096", "EFO:0002426", "EFO:0000770", "EFO:0000174", "EFO:0000558", "EFO:0000248", "EFO:0000333", "EFO:0000350", "EFO:0000394", "EFO:0000437", "EFO:0002087", "EFO:0000564", "EFO:0000569", "EFO:0000637", "EFO:0005287", "EFO:0002918", "EFO:0000705", "EFO:0001376", "EFO:0000730", "EFO:0002914", "EFO:0003967", "EFO:0002920", "EFO:0000737", "EFO:0000760", "EFO:0000622", "EFO:0000693", "Orphanet_26106", "BTO_0001615", "Orphanet_227535", "EFO:0000196", "EFO:0000312", "Orphanet_1331", "BTO_0000551", "EFO:0002037", "EFO:0002038", "EFO:0002039", "EFO:0001092", "EFO:0001093", "EFO:0001095", "EFO:0001096", "EFO:0005356", "EFO:0005357", "EFO:0005358", "EFO:0005359", "EFO:0001100", "EFO:0002168", "EFO:0002175", "EFO:0001167", "EFO:0001168", "EFO:0001169", "EFO:0001170", "EFO:0002185", "EFO:0001171", "EFO:0001172", "EFO:0001173", "EFO:0002186", "EFO:0001174", "EFO:0001175", "EFO:0001176", "EFO:0001177", "EFO:0001178", "EFO:0002187", "EFO:0001179", "EFO:0001180", "EFO:0001181", "EFO:0001189", "EFO:0001190", "EFO:0001191", "EFO:0001192", "EFO:0002221", "EFO:0001199", "EFO:0001205", "EFO:0001206", "EFO:0001208", "EFO:0001209", "EFO:0001211", "EFO:0001212", "EFO:0001214", "EFO:0001215", "EFO:0001216", "EFO:0002241", "EFO:0001236", "EFO:0001239", "EFO:0001240", "EFO:0001241", "EFO:0001242", "EFO:0001243", "EFO:0001244", "EFO:0001245", "EFO:0001246", "EFO:0001247", "EFO:0001258", "EFO:0002385", "EFO:0001262", "EFO:0001263", "EFO:0001264", "EFO:0005215", "EFO:0002791", "EFO:0002120", "EFO:0002122", "EFO:0002123", "EFO:0002171", "EFO:0001185", "EFO:0002370", "EFO:0002379", "EFO:0002121", "EFO:0002205", "EFO:0001187", "EFO:0001186", "EFO:0002345", "EFO:0002346", "EFO:0002347", "EFO:0002348", "EFO:0002349", "EFO:0002350", "EFO:0002104", "EFO:0001086", "EFO:0002813", "EFO:0002138", "EFO:0002141", "EFO:0002143", "EFO:0002144", "EFO:0002151", "EFO:0002819", "EFO:0002162", "EFO:0002163", "EFO:0002164", "EFO:0002165", "EFO:0002166", "EFO:0003039", "EFO:0003115", "EFO:0001165", "EFO:0002823", "EFO:0001166", "EFO:0003127", "EFO:0003128", "EFO:0003129", "EFO:0003130", "EFO:0003131", "EFO:0003132", "EFO:0003133", "EFO:0003134", "EFO:0003135", "EFO:0003136", "EFO:0003137", "EFO:0003138", "EFO:0002827", "EFO:0003140", "EFO:0003142", "EFO:0002828", "EFO:0002836", "EFO:0002840", "EFO:0002249", "EFO:0002250", "EFO:0003116", "EFO:0003043", "EFO:0003117", "EFO:0002252", "EFO:0002253", "EFO:0002254", "EFO:0002255", "EFO:0003118", "EFO:0002256", "EFO:0002257", "EFO:0002258", "EFO:0002259", "EFO:0003119", "EFO:0002260", "EFO:0002261", "EFO:0002262", "EFO:0002263", "EFO:0002264", "EFO:0002265", "EFO:0002266", "EFO:0002267", "EFO:0002268", "EFO:0002269", "EFO:0002270", "EFO:0002271", "EFO:0002272", "EFO:0002273", "EFO:0002274", "EFO:0002276", "EFO:0002277", "EFO:0002278", "EFO:0002279", "EFO:0002280", "EFO:0002281", "EFO:0002282", "EFO:0002283", "EFO:0002284", "EFO:0002285", "EFO:0003120", "EFO:0003122", "EFO:0002286", "EFO:0002287", "EFO:0002288", "EFO:0003121", "EFO:0002290", "EFO:0003123", "EFO:0002291", "EFO:0002292", "EFO:0002293", "EFO:0003044", "EFO:0003124", "EFO:0002295", "EFO:0002296", "EFO:0002298", "EFO:0002300", "EFO:0002304", "EFO:0002305", "EFO:0002306", "EFO:0003125", "EFO:0002307", "EFO:0002843", "EFO:0002844", "EFO:0002845", "EFO:0002846", "EFO:0002847", "EFO:0002848", "EFO:0002850", "EFO:0002851", "EFO:0002852", "EFO:0002854", "EFO:0002855", "EFO:0002328", "EFO:0002861", "EFO:0002363", "EFO:0002374", "EFO:0002386", "EFO:0002040", "EFO:0002041", "EFO:0002042", "EFO:0002043", "EFO:0002045", "EFO:0002048", "EFO:0002049", "EFO:0002113", "BTO_0000164", "EFO:0002130", "EFO:0005233", "EFO:0003037", "EFO:0002145", "EFO:0002146", "EFO:0002167", "EFO:0002170", "EFO:0002183", "EFO:0005369", "EFO:0002190", "EFO:0002193", "EFO:0002194", "EFO:0002793", "EFO:0002200", "EFO:0002209", "EFO:0002060", "EFO:0002218", "EFO:0001197", "EFO:0005284", "EFO:0002225", "EFO:0002231", "EFO:0002238", "EFO:0002242", "EFO:0002798", "EFO:0002248", "EFO:0002075", "EFO:0002313", "EFO:0002319", "EFO:0002321", "EFO:0001234", "EFO:0002352", "EFO:0002354", "EFO:0002357", "EFO:0001253", "EFO:0001257", "EFO:0005294", "EFO:0002810", "EFO:0002100", "EFO:0002103", "EFO:0002107", "EFO:0002119", "EFO:0002132", "EFO:0002140", "EFO:0002195", "EFO:0003056", "EFO:0001213", "EFO:0002243", "EFO:0002327", "EFO:0002079", "EFO:0003081", "EFO:0002332", "EFO:0002333", "EFO:0002080", "EFO:0005376", "EFO:0005377", "EFO:0002390", "EFO:0002873", "EFO:0002874", "EFO:0002875", "EFO:0002139", "EFO:0002148", "EFO:0002177", "EFO:0002311", "EFO:0003061", "EFO:0002340", "BTO_0001130", "BTO_0001616", "BTO_0001967", "EFO:0002499", "EFO:0000519", "EFO:0000630", "EFO:0002501", "BTO_0000690", "BTO_0000797", "BTO_0000583", "BTO_0001033", "EFO:0001203", "Orphanet_213524", "Orphanet_145", "Orphanet_300576", "Orphanet_261600", "Orphanet_261619", "Orphanet_261629", "Orphanet_231127", "Orphanet_96076", "Orphanet_231130", "Orphanet_231120", "Orphanet_238613", "Orphanet_231117", "Orphanet_96193", "Orphanet_1466", "Orphanet_90321", "Orphanet_90322", "Orphanet_90324", "Orphanet_109", "Orphanet_201", "Orphanet_744", "Orphanet_2969", "Orphanet_137608", "Orphanet_353281", "Orphanet_353277", "Orphanet_353284", "Orphanet_231144", "Orphanet_231137", "Orphanet_231140", "Orphanet_231147", "Orphanet_96182", "Orphanet_276249", "Orphanet_276252", "Orphanet_276255", "Orphanet_276258", "Orphanet_276261", "Orphanet_276264", "Orphanet_276267", "Orphanet_90342", "Orphanet_276252", "Orphanet_276258", "Orphanet_276264", "Orphanet_276267", "Orphanet_313846"));
    }
}