package uk.ac.ebi.atlas.search.EFO;

import com.google.common.base.Joiner;
import com.google.common.collect.ImmutableList;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;

import javax.inject.Inject;

import static org.hamcrest.Matchers.hasSize;
import static org.hamcrest.collection.IsIterableContainingInOrder.contains;
import static org.junit.Assert.assertThat;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations = {"classpath:applicationContext.xml", "classpath:solrContextIT.xml", "classpath:oracleContext.xml"})
public class EFOTermExpansionClientIT {


    @Inject
    EFOTermExpansionClient subject;

    @Test
    public void cancer() throws Exception {
        ImmutableList<String> children = subject.fetchEFOChildren("cancer");

        System.out.println("\"" + Joiner.on("\", \"").join(children) + "\"");

        assertThat(children, hasSize(399));
        assertThat(children, contains("EFO_0000216", "EFO_0000228", "EFO_0000231", "EFO_0003093", "EFO_0004193", "EFO_0000292", "EFO_0000305", "EFO_0001061", "EFO_0005221", "EFO_0004986", "EFO_0000466", "EFO_0002916", "EFO_0000178", "EFO_0000182", "EFO_0002938", "EFO_0000563", "EFO_0001071", "EFO_0000756", "EFO_0004906", "EFO_0000196", "EFO_0001075", "EFO_0002618", "EFO_0001663", "EFO_0002890", "EFO_0000698", "EFO_0000707", "EFO_0000205", "EFO_0000206", "EFO_0005088", "EFO_0002892", "EFO_0002919", "EFO_0002921", "EFO_0000272", "EFO_0003094", "EFO_0002939", "EFO_0000632", "EFO_0000565", "EFO_0000574", "EFO_0002427", "EFO_0002425", "EFO_0000096", "EFO_0002426", "EFO_0000770", "EFO_0000174", "EFO_0000558", "EFO_0000248", "EFO_0000333", "EFO_0000350", "EFO_0000394", "EFO_0000437", "EFO_0002087", "EFO_0000564", "EFO_0000569", "EFO_0000637", "EFO_0005287", "EFO_0002918", "EFO_0000705", "EFO_0001376", "EFO_0000730", "EFO_0002914", "EFO_0003967", "EFO_0002920", "EFO_0000737", "EFO_0000760", "EFO_0000622", "EFO_0000693", "Orphanet_26106", "BTO_0001615", "Orphanet_227535", "EFO_0000196", "EFO_0000312", "Orphanet_1331", "BTO_0000551", "EFO_0002037", "EFO_0002038", "EFO_0002039", "EFO_0001092", "EFO_0001093", "EFO_0001095", "EFO_0001096", "EFO_0005356", "EFO_0005357", "EFO_0005358", "EFO_0005359", "EFO_0001100", "EFO_0002168", "EFO_0002175", "EFO_0001167", "EFO_0001168", "EFO_0001169", "EFO_0001170", "EFO_0002185", "EFO_0001171", "EFO_0001172", "EFO_0001173", "EFO_0002186", "EFO_0001174", "EFO_0001175", "EFO_0001176", "EFO_0001177", "EFO_0001178", "EFO_0002187", "EFO_0001179", "EFO_0001180", "EFO_0001181", "EFO_0001189", "EFO_0001190", "EFO_0001191", "EFO_0001192", "EFO_0002221", "EFO_0001199", "EFO_0001205", "EFO_0001206", "EFO_0001208", "EFO_0001209", "EFO_0001211", "EFO_0001212", "EFO_0001214", "EFO_0001215", "EFO_0001216", "EFO_0002241", "EFO_0001236", "EFO_0001239", "EFO_0001240", "EFO_0001241", "EFO_0001242", "EFO_0001243", "EFO_0001244", "EFO_0001245", "EFO_0001246", "EFO_0001247", "EFO_0001258", "EFO_0002385", "EFO_0001262", "EFO_0001263", "EFO_0001264", "EFO_0005215", "EFO_0002791", "EFO_0002120", "EFO_0002122", "EFO_0002123", "EFO_0002171", "EFO_0001185", "EFO_0002370", "EFO_0002379", "EFO_0002121", "EFO_0002205", "EFO_0001187", "EFO_0001186", "EFO_0002345", "EFO_0002346", "EFO_0002347", "EFO_0002348", "EFO_0002349", "EFO_0002350", "EFO_0002104", "EFO_0001086", "EFO_0002813", "EFO_0002138", "EFO_0002141", "EFO_0002143", "EFO_0002144", "EFO_0002151", "EFO_0002819", "EFO_0002162", "EFO_0002163", "EFO_0002164", "EFO_0002165", "EFO_0002166", "EFO_0003039", "EFO_0003115", "EFO_0001165", "EFO_0002823", "EFO_0001166", "EFO_0003127", "EFO_0003128", "EFO_0003129", "EFO_0003130", "EFO_0003131", "EFO_0003132", "EFO_0003133", "EFO_0003134", "EFO_0003135", "EFO_0003136", "EFO_0003137", "EFO_0003138", "EFO_0002827", "EFO_0003140", "EFO_0003142", "EFO_0002828", "EFO_0002836", "EFO_0002840", "EFO_0002249", "EFO_0002250", "EFO_0003116", "EFO_0003043", "EFO_0003117", "EFO_0002252", "EFO_0002253", "EFO_0002254", "EFO_0002255", "EFO_0003118", "EFO_0002256", "EFO_0002257", "EFO_0002258", "EFO_0002259", "EFO_0003119", "EFO_0002260", "EFO_0002261", "EFO_0002262", "EFO_0002263", "EFO_0002264", "EFO_0002265", "EFO_0002266", "EFO_0002267", "EFO_0002268", "EFO_0002269", "EFO_0002270", "EFO_0002271", "EFO_0002272", "EFO_0002273", "EFO_0002274", "EFO_0002276", "EFO_0002277", "EFO_0002278", "EFO_0002279", "EFO_0002280", "EFO_0002281", "EFO_0002282", "EFO_0002283", "EFO_0002284", "EFO_0002285", "EFO_0003120", "EFO_0003122", "EFO_0002286", "EFO_0002287", "EFO_0002288", "EFO_0003121", "EFO_0002290", "EFO_0003123", "EFO_0002291", "EFO_0002292", "EFO_0002293", "EFO_0003044", "EFO_0003124", "EFO_0002295", "EFO_0002296", "EFO_0002298", "EFO_0002300", "EFO_0002304", "EFO_0002305", "EFO_0002306", "EFO_0003125", "EFO_0002307", "EFO_0002843", "EFO_0002844", "EFO_0002845", "EFO_0002846", "EFO_0002847", "EFO_0002848", "EFO_0002850", "EFO_0002851", "EFO_0002852", "EFO_0002854", "EFO_0002855", "EFO_0002328", "EFO_0002861", "EFO_0002363", "EFO_0002374", "EFO_0002386", "EFO_0002040", "EFO_0002041", "EFO_0002042", "EFO_0002043", "EFO_0002045", "EFO_0002048", "EFO_0002049", "EFO_0002113", "BTO_0000164", "EFO_0002130", "EFO_0005233", "EFO_0003037", "EFO_0002145", "EFO_0002146", "EFO_0002167", "EFO_0002170", "EFO_0002183", "EFO_0005369", "EFO_0002190", "EFO_0002193", "EFO_0002194", "EFO_0002793", "EFO_0002200", "EFO_0002209", "EFO_0002060", "EFO_0002218", "EFO_0001197", "EFO_0005284", "EFO_0002225", "EFO_0002231", "EFO_0002238", "EFO_0002242", "EFO_0002798", "EFO_0002248", "EFO_0002075", "EFO_0002313", "EFO_0002319", "EFO_0002321", "EFO_0001234", "EFO_0002352", "EFO_0002354", "EFO_0002357", "EFO_0001253", "EFO_0001257", "EFO_0005294", "EFO_0002810", "EFO_0002100", "EFO_0002103", "EFO_0002107", "EFO_0002119", "EFO_0002132", "EFO_0002140", "EFO_0002195", "EFO_0003056", "EFO_0001213", "EFO_0002243", "EFO_0002327", "EFO_0002079", "EFO_0003081", "EFO_0002332", "EFO_0002333", "EFO_0002080", "EFO_0005376", "EFO_0005377", "EFO_0002390", "EFO_0002873", "EFO_0002874", "EFO_0002875", "EFO_0002139", "EFO_0002148", "EFO_0002177", "EFO_0002311", "EFO_0003061", "EFO_0002340", "BTO_0001130", "BTO_0001616", "BTO_0001967", "EFO_0002499", "EFO_0000519", "EFO_0000630", "EFO_0002501", "BTO_0000690", "BTO_0000797", "BTO_0000583", "BTO_0001033", "EFO_0001203", "Orphanet_213524", "Orphanet_145", "Orphanet_300576", "Orphanet_261600", "Orphanet_261619", "Orphanet_261629", "Orphanet_231127", "Orphanet_96076", "Orphanet_231130", "Orphanet_231120", "Orphanet_238613", "Orphanet_231117", "Orphanet_96193", "Orphanet_1466", "Orphanet_90321", "Orphanet_90322", "Orphanet_90324", "Orphanet_109", "Orphanet_201", "Orphanet_744", "Orphanet_2969", "Orphanet_137608", "Orphanet_353281", "Orphanet_353277", "Orphanet_353284", "Orphanet_231144", "Orphanet_231137", "Orphanet_231140", "Orphanet_231147", "Orphanet_96182", "Orphanet_276249", "Orphanet_276252", "Orphanet_276255", "Orphanet_276258", "Orphanet_276261", "Orphanet_276264", "Orphanet_276267", "Orphanet_90342", "Orphanet_276252", "Orphanet_276258", "Orphanet_276264", "Orphanet_276267", "Orphanet_313846"));
    }
}