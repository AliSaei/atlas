<!doctype html>
<!--
  ~ Copyright 2008-2013 Microarray Informatics Team, EMBL-European Bioinformatics Institute
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  ~
  ~ For further details of the Gene Expression Atlas project, including source code,
  ~ downloads and documentation, please see:
  ~
  ~ http://gxa.github.com/gxa
  -->

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"/>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css"/>
    <script>

        function extract(data) {
            var suggestions = data.spellcheck.suggestions;
            var n = suggestions.length;
            if (n === 2) {
                return suggestions[1].suggestion;
            } else {
                return "";
            }
        }

        $(function () {
            $("#tags").autocomplete({
                source:function (request, response) {
                    $.ajax({
                        'url':'http://ves-hx-75.ebi.ac.uk:8983/solr/suggest',
                        'data':{'wt':'json', 'q':"alltext:" + request.term.toLowerCase()},
                        'success':function (data) {
                            response(extract(data))
                        },
                        'dataType':'jsonp',
                        'jsonp':'json.wrf'
                    });
                    return false;
                }
            });

            $("#tags").autocomplete({ delay:500 });
        });

    </script>
</head>
<body>
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags"/>
</div>
</body>
</html>