{"version":3,"sources":["webpack:///./expression-atlas-anatomogram/index.js","webpack:///./expression-atlas-anatomogram/src/anatomogramRenderer.js","webpack:///./expression-atlas-anatomogram/~/anatomogram/index.js","webpack:///./expression-atlas-anatomogram/~/anatomogram/src/Anatomogram.jsx"],"names":[],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA,+E;;;;;;;;;;ACJA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;;AAEA;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","file":"expressionAtlasAnatomogram.bundle.js","sourcesContent":["\"use strict\";\n\n//*------------------------------------------------------------------*\n\nmodule.exports = require('./src/anatomogramRenderer.js');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./expression-atlas-anatomogram/index.js\n ** module id = 0\n ** module chunks = 2\n **/","\"use strict\";\n\n//*------------------------------------------------------------------*\n\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nvar EventEmitter = require('events');\nvar eventEmitter = new EventEmitter();\n\nvar Anatomogram = require('anatomogram');\n\n//*------------------------------------------------------------------*\n\nfunction render(domNode, anatomogramData, profileRows, expressedColour, hoverColour, jQueryUITheme) {\n\n    if (jQueryUITheme !== \"\") {\n\n        var href = jQueryUITheme === \"atlas\" || typeof jQueryUITheme === \"undefined\" ?\n            window.location.protocol + \"//\" + window.location.host + \"/gxa/resources/css/jquery-ui-1.11.4.custom/css/jquery-ui-min.css\" :\n            \"https://code.jquery.com/ui/1.11.1/themes/\" + jQueryUITheme + \"/jquery-ui.css\";\n\n        var cssDoc = document.createElement(\"link\");\n        cssDoc.setAttribute(\"rel\", \"stylesheet\");\n        cssDoc.setAttribute(\"type\", \"text/css\");\n        cssDoc.setAttribute(\"href\", href);\n        document.getElementsByTagName(\"head\")[0].appendChild(cssDoc);\n\n    }\n\n    ReactDOM.render(\n        React.createElement(\n            Anatomogram,\n            {\n                anatomogramData: anatomogramData,\n                expressedTissueColour: expressedColour,\n                hoveredTissueColour: hoverColour,\n                atlasBaseURL: \"http://wwwdev.ebi.ac.uk/gxa\",\n                profileRows: profileRows,\n                eventEmitter: eventEmitter\n            }\n        ),\n        domNode\n    );\n}\n\n//*------------------------------------------------------------------*\n\nexports.render = render;\nexports.eventEmitter = eventEmitter;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./expression-atlas-anatomogram/src/anatomogramRenderer.js\n ** module id = 979\n ** module chunks = 2\n **/","\"use strict\";\n\n//*------------------------------------------------------------------*\n\nmodule.exports = require('./src/Anatomogram.jsx');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./expression-atlas-anatomogram/~/anatomogram/index.js\n ** module id = 1137\n ** module chunks = 2\n **/","\"use strict\";\n\n//*------------------------------------------------------------------*\n\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nvar $ = require('jquery');\nrequire('jquery-hc-sticky');\nrequire('jquery-ui-bundle');\n\nvar Snap = require('imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js');\n\nvar EventEmitter = require('events');\n\n//*------------------------------------------------------------------*\n\nvar AnatomogramSelectImageButton = React.createClass({\n    propTypes: {\n        anatomogramId: React.PropTypes.string.isRequired,\n        selected: React.PropTypes.bool.isRequired,\n        toggleSrcTemplate: React.PropTypes.string.isRequired,\n        onClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        var selectedToggleSrc = this.props.toggleSrcTemplate + \"_selected.png\",\n            unselectedToggleSrc = this.props.toggleSrcTemplate + \"_unselected.png\";\n\n        return(\n            <div>\n                <img ref=\"toggleButton\" onClick={this._onClick} src={this.props.selected ? selectedToggleSrc : unselectedToggleSrc}\n                     style={{width: \"24px\", height: \"24px\", padding: \"2px\"}}/>\n            </div>\n        );\n    },\n\n    componentDidMount: function() {\n        $(ReactDOM.findDOMNode(this.refs.toggleButton)).button();\n    },\n\n    _onClick: function() {\n        this.props.onClick(this.props.anatomogramId);\n    }\n});\n\n\nvar AnatomogramSelectImageButtons = React.createClass({\n    propTypes: {\n        selectedId: React.PropTypes.string.isRequired,\n        availableAnatomograms: React.PropTypes.array.isRequired,\n        onClick: React.PropTypes.func.isRequired\n    },\n\n    render: function() {\n        if (this.props.availableAnatomograms.length > 1) {\n            var selectedId = this.props.selectedId,\n                onClick = this.props.onClick;\n            var anatomogramSelectImageButtons = this.props.availableAnatomograms.map(function(availableAnatomogram) {\n               return(\n                   <AnatomogramSelectImageButton key={availableAnatomogram.id + \"_toggle\"}\n                    anatomogramId={availableAnatomogram.id} selected={selectedId === availableAnatomogram.id} toggleSrcTemplate={availableAnatomogram.toggleSrcTemplate} onClick={onClick}/>\n               )\n            });\n\n            return (\n                <span>\n                    {anatomogramSelectImageButtons}\n                </span>\n            );\n\n        } else {\n            return (\n                null\n            )\n        }\n    }\n\n});\n\nvar AnatomogramImageParts = React.createClass({\n  propTypes: {\n    idsExpressedInExperiment: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,\n    idsHeatmapWantsHighlighted: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,\n    idsMousedOver: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,\n    idsNotHighlighted: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,\n    expressedTissueColour: React.PropTypes.string.isRequired,\n    hoveredTissueColour: React.PropTypes.string.isRequired\n  },\n\n  getInitialState: function () {\n    return {toDraw: [].concat(\n      AnatomogramImageParts.idsThatShouldBeStronglyHighlighted(this.props)\n        .map(this._highlightStrongly)\n      ,\n      this.props.idsExpressedInExperiment\n        .map(this._highlightSlightly)\n      ,\n      this.props.idsNotHighlighted\n        .map(this._highlightAsBackground)\n      )};\n  },\n\n  render: function() {\n    return <span/>;\n  },\n\n  _highlightStrongly: function(svgPathId) {\n    return {id: svgPathId, colour: this.props.hoveredTissueColour, opacity: 0.7 };\n  },\n\n  _highlightSlightly: function(svgPathId) {\n    return {id: svgPathId, colour: this.props.expressedTissueColour, opacity: 0.7 };\n  },\n\n  _highlightAsBackground: function(svgPathId) {\n    return {id: svgPathId, colour: \"gray\", opacity: 0.5 };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    var oldStrong = AnatomogramImageParts.idsThatShouldBeStronglyHighlighted(this.props);\n    var newStrong = AnatomogramImageParts.idsThatShouldBeStronglyHighlighted(nextProps);\n    var oldWeak = this.props.idsExpressedInExperiment;\n    var newWeak = nextProps.idsExpressedInExperiment;\n\n    var toDraw = [].concat(\n      //ids that heatmap wants highlighted are the most highlighted\n      newStrong\n        .filter(function(id){return oldStrong.indexOf(id)<0})\n        .map(this._highlightStrongly)\n      ,\n      //ids that are expressed in the experiment are highlighted with a weaker colour, often the same as background\n      newWeak\n        .filter(function(id){return newStrong.indexOf(id)<0})\n        .filter(function(id){return oldWeak.indexOf(id)<0}.bind(this))\n        .map(this._highlightSlightly)\n      ,\n      nextProps.idsNotHighlighted\n        .filter(function(id){return this.props.idsNotHighlighted.indexOf(id)<0}.bind(this))\n        .map(this._highlightAsBackground)\n      );\n\n    this.setState({toDraw:toDraw});\n  },\n\n  statics: {\n    idsThatShouldBeStronglyHighlighted(properties){\n      return properties.idsHeatmapWantsHighlighted.concat(properties.idsMousedOver);\n    }\n  }\n});\n\nvar AnatomogramImage = React.createClass({\n  propTypes: {\n    file: React.PropTypes.string.isRequired,\n    height: React.PropTypes.string.isRequired,\n    expressedFactors: React.PropTypes.arrayOf(React.PropTypes.string),\n    expressedFactorsPerRow: React.PropTypes.object.isRequired,\n    allSvgPathIds: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,\n    expressedTissueColour: React.PropTypes.string.isRequired,\n    hoveredTissueColour: React.PropTypes.string.isRequired\n  },\n\n  getInitialState: function() {\n    return {\n      hoveredPathId: null,\n      hoveredRowId: null,\n      mousedOverSvgIds: []\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    if(nextProps.file!==this.props.file){\n      this._loadAnatomogram(nextProps.file);\n    }\n  },\n\n  componentDidMount: function() {\n      this._loadAnatomogram(this.props.file);\n      this._draw();\n  },\n\n  componentDidUpdate: function(){\n    this._draw();\n  },\n\n  _draw: function() {\n    var svg= Snap(ReactDOM.findDOMNode(this.refs.anatomogram)).select(\"g\");\n    if(svg!==null){\n      this._drawOnSvg(svg,this.refs.imageParts.state.toDraw);\n      this.refs.imageParts.setState({toDraw:[]});\n    }\n  },\n  _drawInitialLayout: function(svg){\n    this._drawOnSvg(svg,this.refs.imageParts.getInitialState().toDraw);\n    this.refs.imageParts.setState({toDraw:[]});\n  },\n\n  _drawOnSvg: function(svg, instructions){\n    instructions.forEach(function(instruction){\n      this._highlightOrganismParts(svg,instruction.id, instruction.colour, instruction.opacity);\n    }.bind(this));\n  },\n\n  render: function () {\n    var idsExpressedInExperiment =[],\n        idsHoveredOver=[],\n        idsHeatmapWantsHighlighted = [],\n        idsNotHighlighted = [];\n    for(var i = 0 ; i< this.props.allSvgPathIds.length; i++){\n      var id = this.props.allSvgPathIds[i];\n      if(this.state.mousedOverSvgIds.indexOf(id)>-1){\n        idsHoveredOver.push(id);\n      } else if(this._hoveredRowContainsPathId(id) || this.state.hoveredPathId === id){\n        idsHeatmapWantsHighlighted.push(id);\n      } else if(this.props.expressedFactors.indexOf(id)>-1){\n        idsExpressedInExperiment.push(id);\n      } else {\n        idsNotHighlighted.push(id);\n      }\n    }\n\n    return (<span>\n        <svg ref=\"anatomogram\" style={{display: \"table-cell\", width: \"230px\", height:this.props.height + \"px\"}} />\n        <AnatomogramImageParts ref=\"imageParts\" key={this.props.file}\n            idsExpressedInExperiment={idsExpressedInExperiment}\n            idsHeatmapWantsHighlighted={idsHeatmapWantsHighlighted}\n            idsMousedOver={idsHoveredOver}\n            idsNotHighlighted={idsNotHighlighted}\n            expressedTissueColour={this.props.expressedTissueColour}\n            hoveredTissueColour={this.props.hoveredTissueColour}/>\n      </span>);\n  },\n\n  _highlightPath: function(svgPathId) {\n      this.setState({hoveredPathId: svgPathId});\n  },\n\n  _highlightRow: function(rowId) {\n      this.setState({hoveredRowId: rowId});\n  },\n\n  _loadAnatomogram: function(svgFile) {\n\n      var svgCanvas = Snap(ReactDOM.findDOMNode(this.refs.anatomogram)),\n          $svgCanvas = $(ReactDOM.findDOMNode(this.refs.anatomogram)),\n          allElements = svgCanvas.selectAll(\"*\");\n\n      if (allElements) {\n          allElements.remove();\n      }\n\n      var displayAllOrganismPartsCallback = this._drawInitialLayout;\n      var registerHoverEventsCallback = this._registerHoverEvents;\n      Snap.load(\n          svgFile,\n          function (fragment) {\n              var g = fragment.select(\"g\");\n              g.transform(\"S1.6,0,0\");\n              displayAllOrganismPartsCallback(g);\n              registerHoverEventsCallback(g);\n              svgCanvas.append(g);\n              var img = fragment.select(\"#ccLogo\");\n              var heightTranslate = $svgCanvas.height() - 15;\n              var widthTranslate = $svgCanvas.width() / 2 - 40;\n              img.transform(\"t\"+widthTranslate+\",\"+heightTranslate);\n              svgCanvas.append(img);\n          }\n      );\n  },\n\n  _hoveredRowContainsPathId: function(svgPathId) {\n    return (this.state.hoveredRowId\n            && this.props.expressedFactorsPerRow.hasOwnProperty(this.state.hoveredRowId)\n            && this.props.expressedFactorsPerRow[this.state.hoveredRowId].indexOf(svgPathId) > -1 );\n  },\n\n  _registerHoverEvents: function(svg) {\n      if (svg) {  // Sometimes svg is null... why?\n          var mouseoverCallback = function(svgPathId) {\n              this.props.eventEmitter.emit('gxaAnatomogramTissueMouseEnter', svgPathId);\n              this.setState(function(previousState, currentProps){\n                  var a = [].concat(previousState.mousedOverSvgIds);\n                  a.push(svgPathId);\n                  while(a.length >5){\n                    a.shift();\n                  }\n                  return {mousedOverSvgIds: a};\n              });\n          }.bind(this);\n          var mouseoutCallback = function(svgPathId) {\n              this.props.eventEmitter.emit('gxaAnatomogramTissueMouseLeave', svgPathId);\n              this.setState(function(previousState, currentProps){\n                  var a = previousState.mousedOverSvgIds.map(\n                      function(el){return el===svgPathId ? \"\" : el}\n                    );\n                  return {mousedOverSvgIds: a};\n                });\n          }.bind(this);\n\n          this.props.allSvgPathIds.forEach(function(svgPathId) {\n              var svgElement = svg.select(\"#\" + svgPathId);\n              if (svgElement) {\n                  svgElement.mouseover(function() {mouseoverCallback(svgPathId)});\n                  svgElement.mouseout(function() {mouseoutCallback(svgPathId)});\n              }\n          }, this);\n      }\n  },\n\n  _highlightOrganismParts: function(svg, svgPathId, colour, opacity) {\n      AnatomogramImage._recursivelyChangeProperties(svg.select(\"#\" + svgPathId), colour, opacity);\n  },\n\n  statics: {\n    _recursivelyChangeProperties: function(svgElement, colour, opacity) {\n\n        if (svgElement) {\n            var innerElements = svgElement.selectAll(\"*\");\n\n            if (innerElements.length > 0) {\n                innerElements.forEach(function(innerElement) {\n                    AnatomogramImage._recursivelyChangeProperties(innerElement);\n                });\n            }\n\n            svgElement.attr({\"fill\": colour, \"fill-opacity\": opacity});\n        }\n    },\n    _recursivelySelectElements: function(svgElement) {\n        if (!svgElement) {\n            return [];\n        }\n\n        var innerElements = svgElement.selectAll(\"*\");\n        if (innerElements.length === 0) {\n            return [svgElement];\n        } else {\n            var allElements = [];\n            innerElements.forEach(function(innerElement) {\n                allElements = allElements.concat(AnatomogramImage._recursivelySelectElements(innerElement));\n            });\n            return allElements;\n        }\n    }\n  }\n});\n\n\n\nvar Anatomogram = React.createClass({\n\n    propTypes: {\n        anatomogramData: React.PropTypes.object.isRequired,\n        expressedTissueColour: React.PropTypes.string.isRequired,\n        hoveredTissueColour: React.PropTypes.string.isRequired,\n        profileRows: React.PropTypes.arrayOf(\n            React.PropTypes.shape({\n                id: React.PropTypes.string,\n                name: React.PropTypes.string.isRequired,\n                expressions: React.PropTypes.arrayOf(\n                    React.PropTypes.shape({\n                        factorName: React.PropTypes.string,\n                        color: React.PropTypes.string,\n                        value: React.PropTypes.number, // missing represents \"NA\"/\"NT\"\n                        svgPathId: React.PropTypes.string\n                    })\n                ).isRequired\n            })\n        ).isRequired,\n        eventEmitter: React.PropTypes.instanceOf(EventEmitter),\n        atlasBaseURL: React.PropTypes.string.isRequired\n    },\n\n    getInitialState: function() {\n\n        var availableAnatomograms = [];\n        if (this.props.anatomogramData.maleAnatomogramFile) {\n            availableAnatomograms.push(\n                {id: \"male\",\n                 anatomogramFile: this.props.atlasBaseURL + \"/resources/svg/\" + this.props.anatomogramData.maleAnatomogramFile,\n                 toggleSrcTemplate: this.props.atlasBaseURL + this.props.anatomogramData.toggleButtonMaleImageTemplate}\n            );\n        }\n        if (this.props.anatomogramData.femaleAnatomogramFile) {\n            availableAnatomograms.push(\n                {id: \"female\",\n                 anatomogramFile: this.props.atlasBaseURL + \"/resources/svg/\" + this.props.anatomogramData.femaleAnatomogramFile,\n                 toggleSrcTemplate: this.props.atlasBaseURL + this.props.anatomogramData.toggleButtonFemaleImageTemplate}\n            );\n        }\n        if (this.props.anatomogramData.brainAnatomogramFile) {\n            availableAnatomograms.push(\n                {id: \"brain\",\n                 anatomogramFile: this.props.atlasBaseURL + \"/resources/svg/\" + this.props.anatomogramData.brainAnatomogramFile,\n                 toggleSrcTemplate: this.props.atlasBaseURL + this.props.anatomogramData.toggleButtonBrainImageTemplate}\n            );\n        }\n\n\n        var allExpressedFactors = [],\n            expressedFactorsPerRow = {};\n        this.props.profileRows.forEach(function(profileRow) {\n            var expressedFactors = [];\n            profileRow.expressions.forEach(function(expression) {\n                if (! typeof expression.value !== \"undefined\" && expression.value) {\n                    expressedFactors.push(expression.svgPathId);\n                }\n            });\n            expressedFactorsPerRow[profileRow.name] = expressedFactors;\n            allExpressedFactors = allExpressedFactors.concat(expressedFactors);\n        });\n\n        function onlyUnique(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n\n        return {\n            selectedId: availableAnatomograms[0].id,\n            availableAnatomograms: availableAnatomograms,\n            expressedFactors: allExpressedFactors.filter(onlyUnique),\n            expressedFactorsPerRow: expressedFactorsPerRow\n        }\n    },\n\n    render: function () {\n        function containsHuman(str) {\n            return str.indexOf(\"human\") > -1;\n        }\n\n        return (\n            <div className=\"gxaAnatomogram\" style={{display: \"table\", paddingTop: \"4px\"}}>\n                <div style={{display: \"table-row\"}}>\n                    <div style={{display: \"table-cell\", verticalAlign: \"top\"}}>\n                        <AnatomogramSelectImageButtons selectedId={this.state.selectedId} availableAnatomograms={this.state.availableAnatomograms} onClick={this._handleChange}/>\n                    </div>\n                    <AnatomogramImage\n                      key={this.state.selectedId}\n                      ref=\"currentImage\"\n                      file={this._getAnatomogramSVGFile(this.state.selectedId)}\n                      height={containsHuman(this.props.anatomogramData.maleAnatomogramFile) ? \"375\" : \"265\"}\n                      expressedFactors={this.state.expressedFactors}\n                      expressedFactorsPerRow={this.state.expressedFactorsPerRow}\n                      allSvgPathIds={this.props.anatomogramData.allSvgPathIds}\n                      eventEmitter={this.props.eventEmitter}\n                      expressedTissueColour={this.props.expressedTissueColour}\n                      hoveredTissueColour={this.props.hoveredTissueColour}/>\n                </div>\n            </div>\n        );\n    },\n    _registerListenerIfNecessary(name, fn){\n        if (this.props.eventEmitter &&\n            this.props.eventEmitter._events &&\n            !this.props.eventEmitter._events.hasOwnProperty(name)){\n            this.props.eventEmitter.addListener(name, fn);\n          }\n    },\n\n    componentDidMount: function() {\n        this._registerListenerIfNecessary(\"gxaHeatmapColumnHoverChange\", this._highlightPath);\n        this._registerListenerIfNecessary(\"gxaHeatmapRowHoverChange\", this._highlightRow);\n    },\n\n    componentDidUpdate: function () {\n      this._registerListenerIfNecessary(\"gxaHeatmapColumnHoverChange\", this._highlightPath);\n      this._registerListenerIfNecessary(\"gxaHeatmapRowHoverChange\", this._highlightRow);\n    },\n\n    _handleChange: function(newSelectedId) {\n        if (newSelectedId !== this.state.selectedId) {\n            this.setState({selectedId: newSelectedId});\n        }\n    },\n\n    _highlightPath: function(svgPathId) {\n        this.refs.currentImage._highlightPath(svgPathId);\n    },\n\n    _highlightRow: function(rowId) {\n      this.refs.currentImage._highlightRow(rowId);\n    },\n\n    _getAnatomogramSVGFile: function(id) {\n        for (var i = 0 ; i < this.state.availableAnatomograms.length ; i++) {\n            if (id === this.state.availableAnatomograms[i].id) {\n                return this.state.availableAnatomograms[i].anatomogramFile;\n            }\n        }\n    }\n\n});\n\n//*------------------------------------------------------------------*\n\nmodule.exports = Anatomogram;\n\n\n\n/** WEBPACK FOOTER **\n ** ./expression-atlas-anatomogram/~/anatomogram/src/Anatomogram.jsx\n **/"],"sourceRoot":""}