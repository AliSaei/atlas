<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/gxa/resources/css/atlas.css">
    <link rel="stylesheet" type="text/css"
          href="/gxa/resources/js/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css">
    <link rel="stylesheet" type="text/css" href="/gxa/resources/css/table-grid.css">
    <link rel="stylesheet" type="text/css"
          href="/gxa/resources/css/heatmap-and-anatomogram.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.10.0/react.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.10.0/JSXTransformer.js"></script>
    <script language="JavaScript" type="text/javascript" src="/gxa/resources/js/jquery-1.9.1.min.js"></script>
    <script language="JavaScript" type="text/javascript"
            src="/gxa/resources/js/jquery-ui-1.10.3.fix-8740.0520a49/dist/jquery-ui.min.js"></script>
    <script src="/gxa/resources/js/factorInfoTooltipModule.js"></script>
    <script src="/gxa/resources/js/heatmapModule.js"></script>
</head>
<body>
<section id="factorInfo" style="display:none">
    <div id="factorDescription" style="text-align: center"></div>
    <table class='table-grid' style="padding: 0px; margin: 0px;">
        <thead>
        <tr>
            <th class='header-cell'>
                Property
            </th>
            <th class='header-cell'>
                Value
            </th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</section>
<input id="displayLevels" name="displayLevels" type="hidden" value="true">
<div id="heatmap-react">
    <table>
        <tr>
            <td>
                        <span id="geneSetsCount">Showing X of Y genes found:
                        </span>
                <a id="showGeneSetProfiles" href="javascript:void(0)">(show by gene set)</a>
            </td>
            <td>
                Heatmap legend
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <div id="example" class="heatmap-position"></div>
            </td>
        </tr>
    </table>
</div>

<script type="text/javascript">
    var experimentAccession = 'E-GEOD-26284';

    var assayGroupFactors = [
        {
            "assayGroupId": "g1",
            "factor": {
                "header": "ORGANISM_PART",
                "type": "ORGANISM_PART",
                "value": "adipose",
                "valueOntologyTerm": "ontologyTerm"
            }
        },
        {
            "assayGroupId": "g2",
            "factor": {
                "header": "ORGANISM_PART",
                "type": "ORGANISM_PART",
                "value": "adrenal"
            }
        },
        {
            "assayGroupId": "g3",
            "factor": {
                "header": "ORGANISM_PART",
                "type": "ORGANISM_PART",
                "value": "brain"
            }
        },
        {
            "assayGroupId": "g4",
            "factor": {
                "header": "ORGANISM_PART",
                "type": "ORGANISM_PART",
                "value": "breast"
            }
        }
    ];

    var profiles = [
        {
            "geneId": "ENSG00000082258",
            "geneName": "CCNT2",
            "expressions": [
                {
                    "factorName": "adipose",
                    "color": "#B3B3C0",
                    "value": "3.0",
                    "svgPathId": "ontologyTerm"
                },
                {
                    "factorName": "adrenal",
                    "color": "#9697C0",
                    "value": "9.0"
                },
                {
                    "factorName": "brain",
                    "color": "#A9AAC0",
                    "value": "5.0"
                },
                {
                    "factorName": "breast",
                    "color": "#8D8DC0",
                    "value": "11.0"
                }
            ]
        },
        {
            "geneId": "ENSG00000047315",
            "geneName": "POLR2B",
            "expressions": [
                {
                    "factorName": "adipose",
                    "color": "UNKNOWN",
                    "value": "UNKNOWN",
                    "svgPathId": "ontologyTerm"
                },
                {
                    "factorName": "adrenal",
                    "color": "#0000FF",
                    "value": "47.0"
                },
                {
                    "factorName": "brain",
                    "color": "",
                    "value": ""
                },
                {
                    "factorName": "breast",
                    "color": "#4A4AC0",
                    "value": "25.0"
                }
            ]
        }
    ];

</script>
<script src="heatmap.jsx" type="text/jsx"></script>
<script type="text/jsx">
      /** @jsx React.DOM */

  React.renderComponent(
    <table id="heatmap-table" className="table-grid">
      <HeatmapTableHeader assayGroupFactors={assayGroupFactors} experimentAccession={experimentAccession}/>
      <HeatmapTableBody profiles={profiles} />
    </table>,
    document.getElementById('example')
  );

    // initialise additional jquery-based functionality that requires access to whole react heatmap
    (function ($, heatmapModule) {
        $(document).ready(function () {
            var prefFormDisplayLevelsInputElement = $("#displayLevels");
            var heatmapElement = $('#heatmap-react');
            heatmapModule.initDisplayLevelsButtonOnClick(heatmapElement, prefFormDisplayLevelsInputElement);
       });
    })(jQuery, heatmapModule);

</script>
</body>
</html>
